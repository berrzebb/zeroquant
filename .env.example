# ZeroQuant Environment Configuration
# Copy this file to .env and fill in your values
# 최신 업데이트: 2026-02-06
#
# ⚠️ 보안 주의사항:
# - 거래소 API 키, 알림 토큰 등 민감한 정보는 웹 UI의 [설정] 메뉴에서 관리합니다.
# - 이 파일에는 인프라 설정과 기능 활성화 여부만 포함됩니다.
# - API 키는 AES-256-GCM으로 암호화되어 데이터베이스에 저장됩니다.

# =====================================================
# DATABASE
# =====================================================
DATABASE_URL=postgresql://trader:trader_secret@localhost:5432/trader
DATABASE_MAX_CONNECTIONS=10

# =====================================================
# REDIS
# =====================================================
REDIS_URL=redis://localhost:6379
REDIS_MAX_CONNECTIONS=5

# =====================================================
# API SERVER
# =====================================================
API_HOST=127.0.0.1
API_PORT=3000

# CORS 설정 (콤마로 구분)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Rate Limiting
# RATE_LIMIT_DISABLED=false
# RATE_LIMIT_RPM=60

# 초기 시뮬레이션 잔고
INITIAL_BALANCE=10000000

# 거래소 연동 모드
# true: 실제 거래소 API 사용, false: 시뮬레이션
USE_REAL_EXCHANGE=false

# Mock 데이터 활성화 (개발용)
ENABLE_MOCK_DATA=true

# 기본 모니터링 심볼 (콤마로 구분)
DEFAULT_SYMBOLS_KR=005930,035720,000660,051910
DEFAULT_SYMBOLS_US=AAPL,GOOGL,MSFT,AMZN

# OpenAPI 스펙 내보내기 (development에서만)
# EXPORT_OPENAPI=true

# =====================================================
# AUTHENTICATION
# =====================================================
# JWT 시크릿 (최소 32자 이상 권장)
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRY_HOURS=24

# API 키 암호화 마스터 키 (32 bytes, base64 encoded)
# 생성: openssl rand -base64 32
# ⚠️ 운영 환경에서는 반드시 변경하세요!
ENCRYPTION_MASTER_KEY=your-32-byte-encryption-key-here-base64

# =====================================================
# LOGGING
# =====================================================
# 로그 레벨: error, warn, info, debug, trace
RUST_LOG=info,trader_core=debug,trader_strategy=debug

# 로그 포맷: pretty, json, compact
LOG_FORMAT=pretty

# =====================================================
# ENVIRONMENT
# =====================================================
# development, staging, production
ENVIRONMENT=development

# =====================================================
# NOTIFICATIONS (활성화 여부만 설정)
# ⚠️ 토큰/웹훅 URL은 웹 UI [설정 > 알림]에서 관리합니다.
# =====================================================
# Telegram 알림
TELEGRAM_ENABLED=false
# 알림 레벨: all (전체) / important (주요) / critical (긴급)
TELEGRAM_ALERT_LEVEL=all

# Discord 알림
DISCORD_ENABLED=false

# Slack 알림
SLACK_ENABLED=false

# 이메일 알림
EMAIL_ENABLED=false

# SMS 알림 (Twilio)
SMS_ENABLED=false

# =====================================================
# DATA PROVIDERS (데이터 프로바이더)
# ⚠️ API 키는 웹 UI [설정 > API 키]에서 관리합니다.
# =====================================================
# KRX OPEN API (한국거래소)
# 승인 후 true로 변경, API 키는 UI에서 등록
PROVIDER_KRX_API_ENABLED=false

# Yahoo Finance (해외 시장, 암호화폐)
PROVIDER_YAHOO_ENABLED=true

# 네이버 금융 크롤러 (KR 시장 Fundamental)
# KRX API 없이도 PER, PBR, ROE, 섹터 등 수집 가능
NAVER_FUNDAMENTAL_ENABLED=true
# 요청 간 딜레이 (밀리초, Rate limit 방지)
NAVER_REQUEST_DELAY_MS=300

# =====================================================
# EXCHANGE (거래소 설정)
# ⚠️ API 키/시크릿은 웹 UI [설정 > API 키]에서 관리합니다.
# =====================================================
# Binance 테스트넷 사용 여부
BINANCE_TESTNET=false

# KIS 기본 계좌 유형: REAL (실계좌), MOCK (모의투자)
KIS_DEFAULT_ACCOUNT=MOCK

# =====================================================
# SYMBOL SYNC (심볼 자동 동기화)
# =====================================================
# 최소 심볼 수 (이 수 이하면 동기화 실행)
SYMBOL_SYNC_MIN_COUNT=100

# KRX(한국거래소) 동기화 - KOSPI/KOSDAQ 전 종목 (~2,500개)
SYMBOL_SYNC_KRX=true

# Binance(암호화폐) 동기화 - USDT 거래 페어 (~300개)
SYMBOL_SYNC_BINANCE=false

# Yahoo Finance(미국 주식) 동기화 - S&P 500, NASDAQ 등
SYMBOL_SYNC_YAHOO=true
SYMBOL_SYNC_YAHOO_MAX=500

# =====================================================
# OHLCV COLLECTION (OHLCV 데이터 수집)
# =====================================================
# 수집 대상 시장 (콤마로 구분, 비어있으면 전체)
# 사용 가능: KR (한국), US (미국), CRYPTO (암호화폐)
# OHLCV_TARGET_MARKETS=KR,US

# 배치당 처리할 심볼 수
OHLCV_BATCH_SIZE=50

# 데이터 갱신 기준 (일, 이전 데이터 재수집)
OHLCV_STALE_DAYS=1

# 요청 간 딜레이 (밀리초)
OHLCV_REQUEST_DELAY_MS=500

# 동시 수집 심볼 수 (Semaphore 기반 동시성 제한)
# 높을수록 빠르지만 API rate limit 주의
OHLCV_CONCURRENT_LIMIT=5

# 타임프레임 설정 (콤마로 구분)
# 사용 가능: 5m, 15m, 30m, 1h, 1d, 1w
# 분봉/시간봉은 Yahoo Finance 60일 제한
OHLCV_TIMEFRAMES=1d

# 수집 기간 (YYYYMMDD, 미설정시 자동 계산)
# OHLCV_START_DATE=20230101
# OHLCV_END_DATE=20261231

# 최대 보존 기간 (년)
# 타임프레임별 기본: D1=3년, H1=60일, M5=60일
OHLCV_MAX_RETENTION_YEARS=3

# =====================================================
# FUNDAMENTAL COLLECTION (펀더멘털 데이터 수집)
# =====================================================
# 데이터 갱신 기준 (일)
FUNDAMENTAL_STALE_DAYS=7

# 배치당 처리할 심볼 수
FUNDAMENTAL_BATCH_SIZE=100

# API 요청 간 딜레이 (밀리초)
FUNDAMENTAL_REQUEST_DELAY_MS=50

# 펀더멘털 수집 시 OHLCV 데이터 포함 여부
FUNDAMENTAL_INCLUDE_OHLCV=true

# =====================================================
# SIGNAL PERFORMANCE (신호 성과 계산)
# =====================================================
# 배치당 처리할 신호 수
SIGNAL_PERFORMANCE_BATCH_SIZE=100

# 성과 계산 기간 (일)
SIGNAL_PERFORMANCE_MIN_DAYS=1
SIGNAL_PERFORMANCE_MAX_DAYS=20

# =====================================================
# WATCHLIST (관심종목 우선 처리)
# =====================================================
PRIORITIZE_WATCHLIST=true

# =====================================================
# DAEMON MODE (Collector 데몬 모드)
# =====================================================
# 워크플로우 실행 주기 (분)
DAEMON_INTERVAL_MINUTES=60

# 내부 계산 실행 주기 (분)
INTERNAL_CALC_INTERVAL_MINUTES=30

# =====================================================
# SCHEDULING (시장 운영 시간 기반 스케줄링)
# =====================================================
SCHEDULING_ENABLED=false

# KRX 장마감 후 지연 시간 (분)
# 15:30 장마감 → 16:30 수집 시작
SCHEDULING_KRX_DELAY_MINUTES=60

# 주말 건너뛰기
SCHEDULING_SKIP_WEEKENDS=true

# 휴일 건너뛰기
SCHEDULING_SKIP_HOLIDAYS=true
